<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css' rel='stylesheet' />
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">

    <link rel="stylesheet" href="styles/main.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>

    <!-- Tagify CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css">
    <!-- Tagify JS -->
    <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify"></script>

</head>

<body>
    <div id="menuWrapper">
        <button id="menuToggle">&#9776;</button>
        <div id="menuDropdown" class="hidden">
            <button id="importBtn">Import JSON</button>
            <input type="file" id="fileInput" accept=".json" style="display: none;">
            <button id="exportBtn">Export JSON</button>
            <button id="toggleDashboardBtn">Toggle Dashboard</button>
            <button id="openSettingsBtn">Settings</button>

        </div>
    </div>

    <main>
<div id='calendar'></div>

    <div id="dashboardView" style="padding: 1rem;">
        <h2>Dashboard</h2>

        <div id="customTimeProgress" style="margin-top: 2rem;">
            <div class="time-progress-container">
                <div class="time-progress-main">
                    <div class="time-progress-spent" id="mainSpent" data-tooltip=""></div>
                    <div class="time-progress-remaining" id="mainRemaining" data-tooltip=""></div>
                </div>
                <div class="time-sub-progress">
                    <div class="sub-section" id="subSpent">
                        <div class="awake-asleep-track">
                            <div class="awake-bar" id="awakeSpent" data-tooltip=""></div>
                            <div class="asleep-bar" id="asleepSpent" data-tooltip=""></div>
                        </div>
                    </div>
                    <div class="sub-section" id="subRemaining">
                        <div class="awake-asleep-track">
                            <div class="awake-bar" id="awakeRemaining" data-tooltip=""></div>
                            <div class="asleep-bar" id="asleepRemaining" data-tooltip=""></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <label for="dashboardTagFilter">Filter by Tag:</label>
        <input id="dashboardTagFilter" placeholder="e.g. study, exercise">

        <div class="charts">
            <canvas id="activityPieChart" height="300"></canvas>
            <canvas id="lifetimeChart" height="1"></canvas>


        </div>


        <div id="tagTotals" style="margin-top: 1rem;"></div>
    </div>



    <div id="settingsPanel" style="display:none;">
        <label for="birthDate">Birth Date</label>
        <input type="datetime-local" id="birthDate">

        <label for="lifespanYears">Lifespan (years)</label>
        <input type="number" id="lifespanYears" step="0.01">

        <label for="deathDate">Estimated Death Date</label>
        <input type="datetime-local" id="deathDate" readonly>

        <button id="saveSettingsBtn">Save</button>
    </div>

    </main>
    




    <div id="eventTooltip"
        style="display:none; position:absolute; background:#333; color:white; padding:8px; border-radius:4px; font-size:12px; z-index:2000;">
    </div>

    <div id="modalBackdrop"></div>
    <div id="eventModal">
        <label>Class Name: <input type="text" id="modalTitle" /></label>
        <label>Start Time: <input type="time" id="modalStartTime" /></label>
        <label>End Time: <input type="time" id="modalEndTime" /></label>
        <label>Repeat on Days:<br>
            <select id="modalDaysOfWeek" multiple>
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
            </select>
        </label>
        <label for="modalStartRecur">Start Recur</label>
        <input type="date" id="modalStartRecur" name="modalStartRecur">

        <label for="modalEndRecur">End Recur</label>
        <input type="date" id="modalEndRecur" name="modalEndRecur">

        <label for="modalExceptions">Skip Specific Dates (one per line)</label>
        <textarea id="modalExceptions" placeholder="2025-06-27\n2025-07-04" rows="3" style="width: 100%;"></textarea>

        <label>Background Color: <input type="color" id="modalColor" onchange="updatePreview()" /></label>
        <label>Background Image:
            <input type="file" id="modalBgImage" accept="image/*">
        </label>
        <label>Background Image URL: <input type="text" id="modalBgImageUrl" placeholder="https://..." /></label>
        <label for="modalTags">Tags:</label>
        <input id="modalTags" placeholder="e.g. activity, event" />




        <label>Text Color: <input type="color" id="modalTextColor" value="#ffffff" onchange="updatePreview()" /></label>
        <div id="colorPreview">Preview</div>
        <button id="saveBtn">Save</button>
        <button id="duplicateBtn">Duplicate</button>
        <button id="deleteBtn">Delete</button>
        <button id="cancelBtn">Cancel</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <script src="scripts/script.js"></script>
</body>

</html>